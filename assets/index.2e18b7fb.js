import{aC as F,aB as ie,aV as Oe,aR as ne,aW as J,o as we,a5 as Re,C as Se,P as me,ay as Me,u as ce,aX as Ne,X as pe,H as Q,aY as De,V as $e,aZ as He,W as Ve,aJ as oe,N as z,D as ze,b as Ye,g as ve,d as Be,K as C,e as ue,$ as Ue,E as Ke,a_ as Xe,r as L,aQ as Pe,Z as We,A as I,a$ as Ee,Q as Ge,t as je,_ as qe,J as O,a as f,k as b,w as v,a1 as te,j as E,n as d,B as ye,b0 as W,c as se,l as G,S as R,m as V,b1 as j,a9 as ae,a2 as le,T as Ze,a0 as Ae,b2 as ke,b3 as be,a7 as Je,b4 as Qe,aO as ge}from"./index.7303a6e0.js";import{E as Fe}from"./index.a763055b.js";import{E as xe}from"./index.eaeb6173.js";import{f as _e,d as en}from"./el-scrollbar.1fa0be18.js";import{u as Ce}from"./index.b392d7f5.js";import{t as nn}from"./event.4982e83d.js";const on='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',tn=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,he=e=>Array.from(e.querySelectorAll(on)).filter(n=>sn(n)&&tn(n)),sn=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},$n=function(e,n,...o){let s;n.includes("mouse")||n.includes("click")?s="MouseEvents":n.includes("key")?s="KeyboardEvent":s="HTMLEvents";const a=document.createEvent(s);return a.initEvent(n,...o),e.dispatchEvent(a),e};let q;const an=e=>{var n;if(!F)return 0;if(q!==void 0)return q;const o=document.createElement("div");o.className=`${e}-scrollbar__wrap`,o.style.visibility="hidden",o.style.width="100px",o.style.position="absolute",o.style.top="-9999px",document.body.appendChild(o);const s=o.offsetWidth;o.style.overflow="scroll";const a=document.createElement("div");a.style.width="100%",o.appendChild(a);const l=a.offsetWidth;return(n=o.parentNode)==null||n.removeChild(o),q=s-l,q};function Hn(e,n){if(!F)return;if(!n){e.scrollTop=0;return}const o=[];let s=n.offsetParent;for(;s!==null&&e!==s&&e.contains(s);)o.push(s),s=s.offsetParent;const a=n.offsetTop+o.reduce((c,m)=>c+m.offsetTop,0),l=a+n.offsetHeight,t=e.scrollTop,u=t+e.clientHeight;a<t?e.scrollTop=a:l>u&&(e.scrollTop=l-e.clientHeight)}const Vn=(...e)=>n=>{e.forEach(o=>{ie(o)?o(n):o.value=n})},ln=e=>["",...Oe].includes(e);var Z=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(Z||{});const re=e=>{const n=ne(e)?e:[e],o=[];return n.forEach(s=>{var a;ne(s)?o.push(...re(s)):J(s)&&ne(s.children)?o.push(...re(s.children)):(o.push(s),J(s)&&((a=s.component)==null?void 0:a.subTree)&&o.push(...re(s.component.subTree)))}),o},rn=(e,n,o)=>{let s={offsetX:0,offsetY:0};const a=u=>{const c=u.clientX,m=u.clientY,{offsetX:h,offsetY:T}=s,r=e.value.getBoundingClientRect(),p=r.left,D=r.top,w=r.width,A=r.height,U=document.documentElement.clientWidth,x=document.documentElement.clientHeight,_=-p+h,S=-D+T,K=U-p-w+h,ee=x-D-A+T,X=$=>{const P=Math.min(Math.max(h+$.clientX-c,_),K),H=Math.min(Math.max(T+$.clientY-m,S),ee);s={offsetX:P,offsetY:H},e.value.style.transform=`translate(${me(P)}, ${me(H)})`},M=()=>{document.removeEventListener("mousemove",X),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",X),document.addEventListener("mouseup",M)},l=()=>{n.value&&e.value&&n.value.addEventListener("mousedown",a)},t=()=>{n.value&&e.value&&n.value.removeEventListener("mousedown",a)};we(()=>{Re(()=>{o.value?l():t()})}),Se(()=>{t()})},un=e=>{Me(e)||nn("[useLockscreen]","You need to pass a ref param to this function");const n=ce("popup"),o=Ne(()=>n.bm("parent","hidden"));if(!F||pe(document.body,o.value))return;let s=0,a=!1,l="0";const t=()=>{setTimeout(()=>{Ve(document.body,o.value),a&&(document.body.style.width=l)},200)};Q(e,u=>{if(!u){t();return}a=!pe(document.body,o.value),a&&(l=document.body.style.width),s=an(n.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,m=De(document.body,"overflowY");s>0&&(c||m==="scroll")&&a&&(document.body.style.width=`calc(100% - ${s}px)`),$e(document.body,o.value)}),He(()=>t())},dn=(e,n)=>{let o;Q(()=>e.value,s=>{var a,l;s?(o=document.activeElement,Me(n)&&((l=(a=n.value).focus)==null||l.call(a))):o.focus()})},Le=e=>{if(!e)return{onClick:oe,onMousedown:oe,onMouseup:oe};let n=!1,o=!1;return{onClick:t=>{n&&o&&e(t),n=o=!1},onMousedown:t=>{n=t.target===t.currentTarget},onMouseup:t=>{o=t.target===t.currentTarget}}},de="_trap-focus-children",B=[],Te=e=>{if(B.length===0)return;const n=B[B.length-1][de];if(n.length>0&&e.code===ze.tab){if(n.length===1){e.preventDefault(),document.activeElement!==n[0]&&n[0].focus();return}const o=e.shiftKey,s=e.target===n[0],a=e.target===n[n.length-1];s&&o&&(e.preventDefault(),n[n.length-1].focus()),a&&!o&&(e.preventDefault(),n[0].focus())}},cn={beforeMount(e){e[de]=he(e),B.push(e),B.length<=1&&document.addEventListener("keydown",Te)},updated(e){z(()=>{e[de]=he(e)})},unmounted(){B.shift(),B.length===0&&document.removeEventListener("keydown",Te)}},fn=Ye({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:ve([String,Array,Object])},zIndex:{type:ve([String,Number])}}),mn={click:e=>e instanceof MouseEvent};var pn=Be({name:"ElOverlay",props:fn,emits:mn,setup(e,{slots:n,emit:o}){const s=ce("overlay"),a=c=>{o("click",c)},{onClick:l,onMousedown:t,onMouseup:u}=Le(e.customMaskEvent?void 0:a);return()=>e.mask?C("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:l,onMousedown:t,onMouseup:u},[ue(n,"default")],Z.STYLE|Z.CLASS|Z.PROPS,["onClick","onMouseup","onMousedown"]):Ue("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[ue(n,"default")])}});const vn=pn,En=Be({name:"ElMessageBox",directives:{TrapFocus:cn},components:{ElButton:Fe,ElFocusTrap:_e,ElInput:xe,ElOverlay:vn,ElIcon:Ke,...Xe},inheritAttrs:!1,props:{buttonSize:{type:String,validator:ln},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:n}){const{t:o}=en(),s=ce("message-box"),a=L(!1),{nextZIndex:l}=Pe(),t=We({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:l()}),u=I(()=>{const i=t.type;return{[s.bm("icon",i)]:i&&Ee[i]}}),c=Ce(),m=Ce(),h=Ge(I(()=>e.buttonSize),{prop:!0,form:!0,formItem:!0}),T=I(()=>t.icon||Ee[t.type]||""),r=I(()=>!!t.message),p=L(),D=L(),w=L(),A=L(),U=L(),x=I(()=>t.confirmButtonClass);Q(()=>t.inputValue,async i=>{await z(),e.boxType==="prompt"&&i!==null&&$()},{immediate:!0}),Q(()=>a.value,i=>{var y,k;i&&(e.boxType!=="prompt"&&(t.autofocus?w.value=(k=(y=U.value)==null?void 0:y.$el)!=null?k:p.value:w.value=p.value),t.zIndex=l()),e.boxType==="prompt"&&(i?z().then(()=>{var fe;A.value&&A.value.$el&&(t.autofocus?w.value=(fe=P())!=null?fe:p.value:w.value=p.value)}):(t.editorErrorMessage="",t.validateError=!1))});const _=I(()=>e.draggable);rn(p,D,_),we(async()=>{await z(),e.closeOnHashChange&&window.addEventListener("hashchange",S)}),Se(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",S)});function S(){!a.value||(a.value=!1,z(()=>{t.action&&n("action",t.action)}))}const K=()=>{e.closeOnClickModal&&M(t.distinguishCancelAndClose?"close":"cancel")},ee=Le(K),X=i=>{if(t.inputType!=="textarea")return i.preventDefault(),M("confirm")},M=i=>{var y;e.boxType==="prompt"&&i==="confirm"&&!$()||(t.action=i,t.beforeClose?(y=t.beforeClose)==null||y.call(t,i,t,S):S())},$=()=>{if(e.boxType==="prompt"){const i=t.inputPattern;if(i&&!i.test(t.inputValue||""))return t.editorErrorMessage=t.inputErrorMessage||o("el.messagebox.error"),t.validateError=!0,!1;const y=t.inputValidator;if(typeof y=="function"){const k=y(t.inputValue);if(k===!1)return t.editorErrorMessage=t.inputErrorMessage||o("el.messagebox.error"),t.validateError=!0,!1;if(typeof k=="string")return t.editorErrorMessage=k,t.validateError=!0,!1}}return t.editorErrorMessage="",t.validateError=!1,!0},P=()=>{const i=A.value.$refs;return i.input||i.textarea},H=()=>{M("close")},Ie=()=>{e.closeOnPressEscape&&H()};return e.lockScroll&&un(a),dn(a),{...je(t),ns:s,overlayEvent:ee,visible:a,hasMessage:r,typeClass:u,contentId:c,inputId:m,btnSize:h,iconComponent:T,confirmButtonClasses:x,rootRef:p,focusStartRef:w,headerRef:D,inputRef:A,confirmRef:U,doClose:S,handleClose:H,onCloseRequested:Ie,handleWrapperClick:K,handleInputEnter:X,handleAction:M,t:o}}}),yn=["aria-label","aria-describedby"],bn=["aria-label"],gn=["id"];function Cn(e,n,o,s,a,l){const t=O("el-icon"),u=O("close"),c=O("el-input"),m=O("el-button"),h=O("el-focus-trap"),T=O("el-overlay");return f(),b(Ze,{name:"fade-in-linear",onAfterLeave:n[11]||(n[11]=r=>e.$emit("vanish")),persisted:""},{default:v(()=>[te(C(T,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:v(()=>[E("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:d(`${e.ns.namespace.value}-overlay-message-box`),onClick:n[8]||(n[8]=(...r)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...r)),onMousedown:n[9]||(n[9]=(...r)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...r)),onMouseup:n[10]||(n[10]=(...r)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...r))},[C(h,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:v(()=>[E("div",{ref:"rootRef",class:d([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:ye(e.customStyle),tabindex:"-1",onClick:n[7]||(n[7]=W(()=>{},["stop"]))},[e.title!==null&&e.title!==void 0?(f(),se("div",{key:0,ref:"headerRef",class:d(e.ns.e("header"))},[E("div",{class:d(e.ns.e("title"))},[e.iconComponent&&e.center?(f(),b(t,{key:0,class:d([e.ns.e("status"),e.typeClass])},{default:v(()=>[(f(),b(G(e.iconComponent)))]),_:1},8,["class"])):R("v-if",!0),E("span",null,V(e.title),1)],2),e.showClose?(f(),se("button",{key:0,type:"button",class:d(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:n[0]||(n[0]=r=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:n[1]||(n[1]=j(W(r=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[C(t,{class:d(e.ns.e("close"))},{default:v(()=>[C(u)]),_:1},8,["class"])],42,bn)):R("v-if",!0)],2)):R("v-if",!0),E("div",{id:e.contentId,class:d(e.ns.e("content"))},[E("div",{class:d(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(f(),b(t,{key:0,class:d([e.ns.e("status"),e.typeClass])},{default:v(()=>[(f(),b(G(e.iconComponent)))]),_:1},8,["class"])):R("v-if",!0),e.hasMessage?(f(),se("div",{key:1,class:d(e.ns.e("message"))},[ue(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(f(),b(G(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(f(),b(G(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:v(()=>[ae(V(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):R("v-if",!0)],2),te(E("div",{class:d(e.ns.e("input"))},[C(c,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":n[2]||(n[2]=r=>e.inputValue=r),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:d({invalid:e.validateError}),onKeydown:j(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),E("div",{class:d(e.ns.e("errormsg")),style:ye({visibility:e.editorErrorMessage?"visible":"hidden"})},V(e.editorErrorMessage),7)],2),[[le,e.showInput]])],10,gn),E("div",{class:d(e.ns.e("btns"))},[e.showCancelButton?(f(),b(m,{key:0,loading:e.cancelButtonLoading,class:d([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:n[3]||(n[3]=r=>e.handleAction("cancel")),onKeydown:n[4]||(n[4]=j(W(r=>e.handleAction("cancel"),["prevent"]),["enter"]))},{default:v(()=>[ae(V(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):R("v-if",!0),te(C(m,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:d([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:n[5]||(n[5]=r=>e.handleAction("confirm")),onKeydown:n[6]||(n[6]=j(W(r=>e.handleAction("confirm"),["prevent"]),["enter"]))},{default:v(()=>[ae(V(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[le,e.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,yn)]),_:3},8,["z-index","overlay-class","mask"]),[[le,e.visible]])]),_:3})}var hn=qe(En,[["render",Cn],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const Y=new Map,Tn=e=>{let n=document.body;return e.appendTo&&(Ae(e.appendTo)&&(n=document.querySelector(e.appendTo)),ge(e.appendTo)&&(n=e.appendTo),ge(n)||(n=document.body)),n},wn=(e,n,o=null)=>{const s=C(hn,e,ie(e.message)||J(e.message)?{default:ie(e.message)?e.message:()=>e.message}:null);return s.appContext=o,ke(s,n),Tn(e).appendChild(n.firstElementChild),s.component},Sn=()=>document.createElement("div"),Mn=(e,n)=>{const o=Sn();e.onVanish=()=>{ke(null,o),Y.delete(a)},e.onAction=l=>{const t=Y.get(a);let u;e.showInput?u={value:a.inputValue,action:l}:u=l,e.callback?e.callback(u,s.proxy):l==="cancel"||l==="close"?e.distinguishCancelAndClose&&l!=="cancel"?t.reject("close"):t.reject("cancel"):t.resolve(u)};const s=wn(e,o,n),a=s.proxy;for(const l in e)be(e,l)&&!be(a.$props,l)&&(a[l]=e[l]);return a.visible=!0,a};function N(e,n=null){if(!F)return Promise.reject();let o;return Ae(e)||J(e)?e={message:e}:o=e.callback,new Promise((s,a)=>{const l=Mn(e,n!=null?n:N._context);Y.set(l,{options:e,callback:o,resolve:s,reject:a})})}const Bn=["alert","confirm","prompt"],An={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};Bn.forEach(e=>{N[e]=kn(e)});function kn(e){return(n,o,s,a)=>{let l="";return Je(o)?(s=o,l=""):Qe(o)?l="":l=o,N(Object.assign({title:l,message:n,type:"",...An[e]},s,{boxType:e}),a)}}N.close=()=>{Y.forEach((e,n)=>{n.doClose()}),Y.clear()};N._context=null;const g=N;g.install=e=>{g._context=e._context,e.config.globalProperties.$msgbox=g,e.config.globalProperties.$messageBox=g,e.config.globalProperties.$alert=g.alert,e.config.globalProperties.$confirm=g.confirm,e.config.globalProperties.$prompt=g.prompt};const zn=g;export{zn as E,un as a,Le as b,Vn as c,vn as d,re as f,ln as i,Hn as s,$n as t,rn as u};
